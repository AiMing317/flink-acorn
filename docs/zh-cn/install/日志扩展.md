### 日志扩展

!> 不开启flink jobHistory功能，不支持日志查看接口。

##### 插件配置

```yml
acorn:
  secret: acorn-key
  flink-dir: /opt/flink
  job-history-url: http://localhost:8082
```

##### 配置Flink

```bash
vim /opt/flink/conf/flink-conf.yaml
```

```yaml
# 配置history储存日志的路径
jobmanager.archive.fs.dir: hdfs://isxcode:9000/completed-jobs

# 配置history读取日志的hdfs路径，一定要和jobmanager.archive.fs.dir路径保持一直
historyserver.archive.fs.dir: hdfs://isxcode:9000/completed-jobs

# jobhistory访问端口，默认端口号8082
historyserver.web.port: 8082
```

##### 启动jobHistory

```bash
cd /opt/flink
bin/historyserver.sh start
```

##### 关闭jobHistory

```bash
cd /opt/flink
bin/historyserver.sh stop
```

##### 检查是否启动

```bash
jps
# 10224 HistoryServer
```

###### 访问

> 默认端口号 `8082`

- http://isxcode:8082/#/overview

![20221110180805](https://img.isxcode.com/picgo/20221110180805.png)
